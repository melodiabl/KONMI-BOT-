import{a3 as me,L as R,r as o,O as B,N as ye,R as d,aa as a,U as _}from"./index-CRkNY6ry.js";import{a as ve}from"./select-C8GCKjda.js";var he=()=>typeof document<"u",$=!1,E=null,y=!1,I=!1,x=new Set;function K(e,f){x.forEach(n=>n(e,f))}var ke=typeof window<"u"&&window.navigator!=null?/^Mac/.test(window.navigator.platform):!1;function pe(e){return!(e.metaKey||!ke&&e.altKey||e.ctrlKey||e.key==="Control"||e.key==="Shift"||e.key==="Meta")}function ee(e){y=!0,pe(e)&&(E="keyboard",K("keyboard",e))}function h(e){if(E="pointer",e.type==="mousedown"||e.type==="pointerdown"){y=!0;const f=e.composedPath?e.composedPath()[0]:e.target;let n=!1;try{n=f.matches(":focus-visible")}catch{}if(n)return;K("pointer",e)}}function Ee(e){return e.mozInputSource===0&&e.isTrusted?!0:e.detail===0&&!e.pointerType}function we(e){Ee(e)&&(y=!0,E="virtual")}function Le(e){e.target===window||e.target===document||e.target instanceof Element&&e.target.hasAttribute("tabindex")||(!y&&!I&&(E="virtual",K("virtual",e)),y=!1,I=!1)}function ge(){y=!1,I=!0}function te(){return E!=="pointer"}function Ce(){if(!he()||$)return;const{focus:e}=HTMLElement.prototype;HTMLElement.prototype.focus=function(...n){y=!0,e.apply(this,n)},document.addEventListener("keydown",ee,!0),document.addEventListener("keyup",ee,!0),document.addEventListener("click",we,!0),window.addEventListener("focus",Le,!0),window.addEventListener("blur",ge,!1),typeof PointerEvent<"u"?(document.addEventListener("pointerdown",h,!0),document.addEventListener("pointermove",h,!0),document.addEventListener("pointerup",h,!0)):(document.addEventListener("mousedown",h,!0),document.addEventListener("mousemove",h,!0),document.addEventListener("mouseup",h,!0)),$=!0}function Se(e){Ce(),e(te());const f=()=>e(te());return x.add(f),()=>{x.delete(f)}}const De={border:"0",clip:"rect(0, 0, 0, 0)",height:"1px",width:"1px",margin:"-1px",padding:"0",overflow:"hidden",whiteSpace:"nowrap",position:"absolute"};function Be(e={}){const f=ve(e),{isDisabled:n,isReadOnly:b,isRequired:S,isInvalid:i,id:A,onBlur:ae,onFocus:ne,"aria-describedby":U}=f,{defaultChecked:H,isChecked:T,isFocusable:oe,onChange:re,isIndeterminate:u,name:V,value:q,tabIndex:O=void 0,"aria-label":W,"aria-labelledby":N,"aria-invalid":D,...se}=e,F=me(se,["isDisabled","isReadOnly","isRequired","isInvalid","id","onBlur","onFocus","aria-describedby"]),w=R(re),z=R(ae),G=R(ne),[m,L]=o.useState(!1),[k,j]=o.useState(!1),[p,v]=o.useState(!1),P=o.useRef(!1);o.useEffect(()=>Se(t=>{P.current=t}),[]);const c=o.useRef(null),[J,ie]=o.useState(!0),[ue,g]=o.useState(!!H),M=T!==void 0,r=M?T:ue,Q=o.useCallback(t=>{if(b||n){t.preventDefault();return}M||g(r?t.currentTarget.checked:u?!0:t.currentTarget.checked),w==null||w(t)},[b,n,r,M,u,w]);B(()=>{c.current&&(c.current.indeterminate=!!u)},[u]),ye(()=>{n&&L(!1)},[n,L]),B(()=>{const t=c.current;if(!(t!=null&&t.form))return;const s=()=>{g(!!H)};return t.form.addEventListener("reset",s),()=>{var l;return(l=t.form)==null?void 0:l.removeEventListener("reset",s)}},[]);const X=n&&!oe,Y=o.useCallback(t=>{t.key===" "&&v(!0)},[v]),Z=o.useCallback(t=>{t.key===" "&&v(!1)},[v]);B(()=>{if(!c.current)return;c.current.checked!==r&&g(c.current.checked)},[c.current]);const de=o.useCallback((t={},s=null)=>{const l=C=>{m&&C.preventDefault(),v(!0)};return{...t,ref:s,"data-active":a(p),"data-hover":a(k),"data-checked":a(r),"data-focus":a(m),"data-focus-visible":a(m&&P.current),"data-indeterminate":a(u),"data-disabled":a(n),"data-invalid":a(i),"data-readonly":a(b),"aria-hidden":!0,onMouseDown:d(t.onMouseDown,l),onMouseUp:d(t.onMouseUp,()=>v(!1)),onMouseEnter:d(t.onMouseEnter,()=>j(!0)),onMouseLeave:d(t.onMouseLeave,()=>j(!1))}},[p,r,n,m,k,u,i,b]),ce=o.useCallback((t={},s=null)=>({...t,ref:s,"data-active":a(p),"data-hover":a(k),"data-checked":a(r),"data-focus":a(m),"data-focus-visible":a(m&&P.current),"data-indeterminate":a(u),"data-disabled":a(n),"data-invalid":a(i),"data-readonly":a(b)}),[p,r,n,m,k,u,i,b]),le=o.useCallback((t={},s=null)=>({...F,...t,ref:_(s,l=>{l&&ie(l.tagName==="LABEL")}),onClick:d(t.onClick,()=>{var l;J||((l=c.current)==null||l.click(),requestAnimationFrame(()=>{var C;(C=c.current)==null||C.focus({preventScroll:!0})}))}),"data-disabled":a(n),"data-checked":a(r),"data-invalid":a(i)}),[F,n,r,i,J]),fe=o.useCallback((t={},s=null)=>({...t,ref:_(c,s),type:"checkbox",name:V,value:q,id:A,tabIndex:O,onChange:d(t.onChange,Q),onBlur:d(t.onBlur,z,()=>L(!1)),onFocus:d(t.onFocus,G,()=>L(!0)),onKeyDown:d(t.onKeyDown,Y),onKeyUp:d(t.onKeyUp,Z),required:S,checked:r,disabled:X,readOnly:b,"aria-label":W,"aria-labelledby":N,"aria-invalid":D?!!D:i,"aria-describedby":U,"aria-disabled":n,"aria-checked":u?"mixed":r,style:De}),[V,q,A,O,Q,z,G,Y,Z,S,r,X,b,W,N,D,i,U,n,u]),be=o.useCallback((t={},s=null)=>({...t,ref:s,onMouseDown:d(t.onMouseDown,Fe),"data-disabled":a(n),"data-checked":a(r),"data-invalid":a(i)}),[r,n,i]);return{state:{isInvalid:i,isFocused:m,isChecked:r,isActive:p,isHovered:k,isIndeterminate:u,isDisabled:n,isReadOnly:b,isRequired:S},getRootProps:le,getCheckboxProps:de,getIndicatorProps:ce,getInputProps:fe,getLabelProps:be,htmlProps:F}}function Fe(e){e.preventDefault(),e.stopPropagation()}export{Be as u};
//# sourceMappingURL=use-checkbox-CV8AuttE.js.map
