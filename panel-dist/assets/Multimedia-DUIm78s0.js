import{f as je,r as M,b as pe,j as e,a as ue,_ as ge,t as q,h as me,n as fe,i as H,p as V,B as p,S as ve,T as i,V as b,F as be,H as N,m as y,q as n,I as h,s as S,l as O,y as ye,z as Ce,C as Se,E as we,M as $,v as Q,w as G,a2 as Y,x as K}from"./index-CRkNY6ry.js";import{W as X,C as u,c as g,a7 as Me,X as J,U as P,a8 as ze,g as Fe,E as Ie,y as Ae,D as Be,V as Z,Y as ke}from"./index.esm-CzniNAqg.js";import{u as Te}from"./useMutation-tt7yEThG.js";import{u as ee}from"./useQuery-B78dU_LM.js";import{S as se}from"./simple-grid-6k9JvjOk.js";import{S as c,a as t,b as d,c as w}from"./stat-number-Cmk69z9o.js";import{I as re}from"./input-BR2M-WI7.js";import{S as De}from"./select-C8GCKjda.js";import{W as Ve,a as Oe}from"./wrap-CxrcFGT_.js";import{I as Ee}from"./image-DYvxu-zB.js";import{T as ae}from"./tooltip-DDxb5mqh.js";import{M as ie,a as oe}from"./modal-footer-B3ZHaos3.js";const ne=je(function(m,z){const{ratio:f=4/3,children:F,className:r,...I}=m,A=M.Children.only(F),B=pe("chakra-aspect-ratio",r);return e.jsx(ue.div,{ref:z,position:"relative",className:B,_before:{height:0,content:'""',display:"block",paddingBottom:ge(f,C=>`${1/C*100}%`)},__css:{"& > *:not(style)":{overflow:"hidden",position:"absolute",top:"0",right:"0",bottom:"0",left:"0",display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:"100%"},"& > img, & > video":{objectFit:"cover"}},...I,children:A})});ne.displayName="AspectRatio";const Ke=()=>{const[m,z]=M.useState(""),[f,F]=M.useState("all"),[r,I]=M.useState(null),{isOpen:A,onOpen:B,onClose:C}=q(),{isOpen:le,onOpen:ce,onClose:E}=q(),k=me(),L=fe(),x=H("white","gray.700"),j=H("gray.200","gray.600"),{data:T,isLoading:te}=ee("multimedia",()=>V.getMultimedia("all")),{data:o}=ee("multimediaStats",V.getMultimediaStats),de=Te(s=>V.deleteMultimedia(s.toString()),{onSuccess:()=>{L.invalidateQueries("multimedia"),L.invalidateQueries("multimediaStats"),k({title:"Archivo eliminado exitosamente",status:"success"})},onError:s=>{var a,l;k({title:"Error",description:((l=(a=s.response)==null?void 0:a.data)==null?void 0:l.message)||"Error al eliminar el archivo",status:"error"})}}),W=s=>{switch(s){case"image":return P;case"video":return J;case"audio":return ke;case"document":return Z;default:return Z}},v=s=>{switch(s){case"image":return"blue";case"video":return"purple";case"audio":return"green";case"document":return"orange";default:return"gray"}},U=s=>{if(s===0)return"0 Bytes";const a=1024,l=["Bytes","KB","MB","GB"],R=Math.floor(Math.log(s)/Math.log(a));return parseFloat((s/Math.pow(a,R)).toFixed(2))+" "+l[R]},he=(T==null?void 0:T.filter(s=>{const a=s.name.toLowerCase().includes(m.toLowerCase())||s.description.toLowerCase().includes(m.toLowerCase()),l=f==="all"||s.type===f;return a&&l}))||[],xe=s=>{window.confirm("¿Estás seguro de que quieres eliminar este archivo?")&&de.mutate(s)},D=s=>{I(s),ce()},_=s=>{const a=document.createElement("a");a.href=s.url,a.download=s.name,document.body.appendChild(a),a.click(),document.body.removeChild(a),k({title:"Descarga iniciada",description:`Descargando ${s.name}`,status:"info"})};return te?e.jsxs(p,{textAlign:"center",py:10,children:[e.jsx(ve,{size:"xl"}),e.jsx(i,{mt:4,children:"Cargando multimedia..."})]}):e.jsxs(p,{children:[e.jsxs(b,{spacing:6,align:"stretch",children:[e.jsxs(be,{align:"center",justify:"space-between",children:[e.jsxs(p,{children:[e.jsx(N,{size:"lg",children:"Gestión de Multimedia"}),e.jsx(i,{color:"gray.600",mt:1,children:"Administra archivos multimedia del sistema"})]}),e.jsx(y,{leftIcon:e.jsx(X,{}),colorScheme:"blue",onClick:B,children:"Subir Archivos"})]}),e.jsxs(se,{columns:{base:1,md:2,lg:4},spacing:6,children:[e.jsx(u,{bg:x,border:"1px",borderColor:j,children:e.jsx(g,{children:e.jsxs(c,{children:[e.jsx(t,{children:e.jsxs(n,{children:[e.jsx(h,{as:Me,color:"blue.500"}),e.jsx(i,{children:"Total Archivos"})]})}),e.jsx(d,{children:(o==null?void 0:o.totalFiles)||0}),e.jsx(w,{children:"Archivos en el sistema"})]})})}),e.jsx(u,{bg:x,border:"1px",borderColor:j,children:e.jsx(g,{children:e.jsxs(c,{children:[e.jsx(t,{children:e.jsxs(n,{children:[e.jsx(h,{as:J,color:"purple.500"}),e.jsx(i,{children:"Videos"})]})}),e.jsx(d,{children:(o==null?void 0:o.videos)||0}),e.jsx(w,{children:"Archivos de video"})]})})}),e.jsx(u,{bg:x,border:"1px",borderColor:j,children:e.jsx(g,{children:e.jsxs(c,{children:[e.jsx(t,{children:e.jsxs(n,{children:[e.jsx(h,{as:P,color:"green.500"}),e.jsx(i,{children:"Imágenes"})]})}),e.jsx(d,{children:(o==null?void 0:o.images)||0}),e.jsx(w,{children:"Archivos de imagen"})]})})}),e.jsx(u,{bg:x,border:"1px",borderColor:j,children:e.jsx(g,{children:e.jsxs(c,{children:[e.jsx(t,{children:e.jsxs(n,{children:[e.jsx(h,{as:ze,color:"orange.500"}),e.jsx(i,{children:"Audio"})]})}),e.jsx(d,{children:(o==null?void 0:o.audio)||0}),e.jsx(w,{children:"Archivos de audio"})]})})})]}),e.jsx(u,{bg:x,border:"1px",borderColor:j,children:e.jsx(g,{children:e.jsxs(n,{spacing:4,wrap:"wrap",children:[e.jsx(re,{placeholder:"Buscar archivos...",value:m,onChange:s=>z(s.target.value),maxW:"300px"}),e.jsxs(De,{value:f,onChange:s=>F(s.target.value),maxW:"200px",children:[e.jsx("option",{value:"all",children:"Todos los tipos"}),e.jsx("option",{value:"image",children:"Imágenes"}),e.jsx("option",{value:"video",children:"Videos"}),e.jsx("option",{value:"audio",children:"Audio"}),e.jsx("option",{value:"document",children:"Documentos"})]})]})})}),e.jsx(Ve,{spacing:4,children:he.map(s=>e.jsx(Oe,{children:e.jsx(u,{bg:x,border:"1px",borderColor:j,maxW:"300px",cursor:"pointer",_hover:{transform:"translateY(-2px)",shadow:"lg"},transition:"all 0.2s",children:e.jsxs(g,{p:0,children:[e.jsx(ne,{ratio:16/9,children:s.type==="image"?e.jsx(Ee,{src:s.thumbnail||s.url,alt:s.name,objectFit:"cover",onClick:()=>D(s)}):e.jsx(p,{bg:`${v(s.type)}.100`,display:"flex",alignItems:"center",justifyContent:"center",onClick:()=>D(s),children:e.jsx(h,{as:W(s.type),size:"3xl",color:`${v(s.type)}.500`})})}),e.jsx(p,{p:4,children:e.jsxs(b,{align:"start",spacing:2,children:[e.jsxs(n,{justify:"space-between",w:"full",children:[e.jsx(i,{fontWeight:"semibold",noOfLines:1,children:s.name}),e.jsx(S,{colorScheme:v(s.type),size:"sm",children:s.format.toUpperCase()})]}),e.jsx(i,{fontSize:"sm",color:"gray.500",noOfLines:2,children:s.description}),e.jsxs(n,{justify:"space-between",w:"full",children:[e.jsx(i,{fontSize:"xs",color:"gray.400",children:U(s.size)}),e.jsxs(i,{fontSize:"xs",color:"gray.400",children:[s.views," vistas"]})]}),e.jsxs(n,{spacing:1,wrap:"wrap",children:[s.tags.slice(0,2).map((a,l)=>e.jsx(S,{colorScheme:"blue",variant:"subtle",fontSize:"xs",children:a},l)),s.tags.length>2&&e.jsxs(S,{colorScheme:"gray",variant:"subtle",fontSize:"xs",children:["+",s.tags.length-2]})]}),e.jsxs(n,{justify:"space-between",w:"full",children:[e.jsxs(n,{spacing:2,children:[e.jsx(ae,{label:"Ver detalles",children:e.jsx(O,{"aria-label":"Ver archivo",icon:e.jsx(Fe,{}),size:"sm",variant:"ghost",onClick:()=>D(s)})}),e.jsx(ae,{label:"Descargar",children:e.jsx(O,{"aria-label":"Descargar archivo",icon:e.jsx(Ie,{}),size:"sm",variant:"ghost",onClick:()=>_(s)})})]}),e.jsxs(ye,{children:[e.jsx(Ce,{as:O,"aria-label":"Más opciones",icon:e.jsx(Ae,{}),size:"sm",variant:"ghost"}),e.jsx(Se,{children:e.jsx(we,{icon:e.jsx(Be,{}),color:"red.500",onClick:()=>xe(s.id),children:"Eliminar"})})]})]})]})})]})})},s.id))})]}),e.jsxs($,{isOpen:A,onClose:C,size:"xl",children:[e.jsx(Q,{}),e.jsxs(ie,{children:[e.jsx(G,{children:"Subir Archivos Multimedia"}),e.jsx(Y,{}),e.jsx(K,{children:e.jsx(b,{spacing:6,children:e.jsxs(p,{border:"2px dashed",borderColor:"gray.300",borderRadius:"lg",p:8,textAlign:"center",w:"full",_hover:{borderColor:"blue.500"},transition:"all 0.2s",children:[e.jsx(h,{as:X,size:"4xl",color:"gray.400",mb:4}),e.jsx(i,{fontSize:"lg",fontWeight:"semibold",mb:2,children:"Arrastra archivos aquí o haz clic para seleccionar"}),e.jsx(i,{fontSize:"sm",color:"gray.500",mb:4,children:"Soporta imágenes, videos, audio y documentos"}),e.jsx(re,{type:"file",multiple:!0,accept:"image/*,video/*,audio/*,.pdf,.doc,.docx,.txt",display:"none",id:"file-upload"}),e.jsx(y,{as:"label",htmlFor:"file-upload",colorScheme:"blue",cursor:"pointer",children:"Seleccionar Archivos"})]})})}),e.jsx(oe,{children:e.jsx(y,{variant:"ghost",mr:3,onClick:C,children:"Cancelar"})})]})]}),e.jsxs($,{isOpen:le,onClose:E,size:"lg",children:[e.jsx(Q,{}),e.jsxs(ie,{children:[e.jsx(G,{children:"Detalles del Archivo"}),e.jsx(Y,{}),e.jsx(K,{children:r&&e.jsxs(b,{spacing:4,align:"stretch",children:[e.jsxs(n,{children:[e.jsx(h,{as:W(r.type),color:`${v(r.type)}.500`,size:"lg"}),e.jsxs(b,{align:"start",spacing:1,children:[e.jsx(N,{size:"md",children:r.name}),e.jsx(S,{colorScheme:v(r.type),children:r.format.toUpperCase()})]})]}),e.jsx(i,{children:r.description}),e.jsxs(se,{columns:2,spacing:4,children:[e.jsxs(c,{children:[e.jsx(t,{children:"Tamaño"}),e.jsx(d,{children:U(r.size)})]}),e.jsxs(c,{children:[e.jsx(t,{children:"Descargas"}),e.jsx(d,{children:r.downloads})]}),e.jsxs(c,{children:[e.jsx(t,{children:"Vistas"}),e.jsx(d,{children:r.views})]}),e.jsxs(c,{children:[e.jsx(t,{children:"Categoría"}),e.jsx(d,{children:r.category})]})]}),e.jsxs(i,{fontSize:"sm",color:"gray.500",children:["Subido por: ",r.uploadedBy]}),e.jsxs(i,{fontSize:"sm",color:"gray.500",children:["Fecha: ",new Date(r.uploadedAt).toLocaleDateString()]})]})}),e.jsxs(oe,{children:[e.jsx(y,{variant:"ghost",mr:3,onClick:E,children:"Cerrar"}),e.jsx(y,{colorScheme:"blue",onClick:()=>r&&_(r),children:"Descargar"})]})]})]})]})};export{Ke as Multimedia,Ke as default};
//# sourceMappingURL=Multimedia-DUIm78s0.js.map
