import{r as ce,h as ue,i as he,p as z,j as e,A as ve,k as ze,B as xe,V as p,F as Ae,H as m,T as i,q as n,m as we,I as f,s as a}from"./index-CRkNY6ry.js";import{E as Te,C as t,c as g,o as je,d as Ue,R as me,l as te,q as Ce,L as We,a4 as Pe,a5 as Re}from"./index.esm-CzniNAqg.js";import{u as A}from"./useQuery-B78dU_LM.js";import{S as Ee}from"./select-C8GCKjda.js";import{S as w}from"./simple-grid-6k9JvjOk.js";import{S as C,a as W,b as P,c as R}from"./stat-number-Cmk69z9o.js";import{S as E}from"./stat-arrow-RnLMkZWe.js";import{T as Fe,a as Ge,b as F,c as Me,d as G}from"./tab-panels-B06n9vaT.js";import{C as u}from"./card-header-s4sK_o_H.js";import{P as c}from"./progress-L6EjqW44.js";import{T as Be,a as ke,b as ge,c as T,d as He,e as U}from"./tr-Cbx9FMhk.js";import"./use-controllable-state-ixhYjrLh.js";const Ze=()=>{var I,L,$,V,q,N,y,K,O,Q,J,X,Y,Z,_,S,D,ee,se,re,ie,ne,oe,le,de;const[M,pe]=ce.useState("7d"),[be,ae]=ce.useState(0);ue();const x=he("white","gray.700"),j=he("gray.200","gray.600"),{data:s,isLoading:Ie,error:k}=A(["analytics",M],()=>z.getAnalytics(M)),{data:r}=A("userStats",z.getUsuarioStats),{data:h}=A("groupStats",z.getGroupStats),{data:o}=A("aporteStats",z.getAporteStats),{data:l}=A("pedidoStats",z.getPedidoStats),H=d=>d>0?"green":d<0?"red":"gray",fe=d=>d>0?Pe:d<0?Re:te,b=d=>d>=1e6?`${(d/1e6).toFixed(1)}M`:d>=1e3?`${(d/1e3).toFixed(1)}K`:d.toString(),B=d=>`${d.toFixed(1)}%`;return k?e.jsxs(ve,{status:"error",children:[e.jsx(ze,{}),"Error al cargar analíticas: ",k.message]}):e.jsx(xe,{children:e.jsxs(p,{spacing:6,align:"stretch",children:[e.jsxs(Ae,{align:"center",justify:"space-between",children:[e.jsxs(xe,{children:[e.jsx(m,{size:"lg",children:"Analíticas del Sistema"}),e.jsx(i,{color:"gray.600",mt:1,children:"Métricas y estadísticas detalladas del sistema"})]}),e.jsxs(n,{spacing:3,children:[e.jsxs(Ee,{value:M,onChange:d=>pe(d.target.value),maxW:"200px",children:[e.jsx("option",{value:"1d",children:"Último día"}),e.jsx("option",{value:"7d",children:"Últimos 7 días"}),e.jsx("option",{value:"30d",children:"Últimos 30 días"}),e.jsx("option",{value:"90d",children:"Últimos 90 días"})]}),e.jsx(we,{leftIcon:e.jsx(Te,{}),colorScheme:"blue",variant:"outline",children:"Exportar"})]})]}),e.jsxs(w,{columns:{base:1,md:2,lg:4},spacing:6,children:[e.jsx(t,{bg:x,border:"1px",borderColor:j,children:e.jsx(g,{children:e.jsxs(C,{children:[e.jsx(W,{children:e.jsxs(n,{children:[e.jsx(f,{as:je,color:"blue.500"}),e.jsx(i,{children:"Usuarios Totales"})]})}),e.jsx(P,{children:b((r==null?void 0:r.totalUsuarios)||0)}),e.jsxs(R,{children:[e.jsx(E,{type:"increase"}),((I=s==null?void 0:s.trends)==null?void 0:I.usersGrowth)||0,"% vs período anterior"]})]})})}),e.jsx(t,{bg:x,border:"1px",borderColor:j,children:e.jsx(g,{children:e.jsxs(C,{children:[e.jsx(W,{children:e.jsxs(n,{children:[e.jsx(f,{as:Ue,color:"green.500"}),e.jsx(i,{children:"Grupos Activos"})]})}),e.jsx(P,{children:b((h==null?void 0:h.totalGrupos)||0)}),e.jsxs(R,{children:[e.jsx(E,{type:"increase"}),((L=s==null?void 0:s.trends)==null?void 0:L.groupsGrowth)||0,"% vs período anterior"]})]})})}),e.jsx(t,{bg:x,border:"1px",borderColor:j,children:e.jsx(g,{children:e.jsxs(C,{children:[e.jsx(W,{children:e.jsxs(n,{children:[e.jsx(f,{as:me,color:"purple.500"}),e.jsx(i,{children:"Aportes"})]})}),e.jsx(P,{children:b((o==null?void 0:o.totalAportes)||0)}),e.jsxs(R,{children:[e.jsx(E,{type:"increase"}),(($=s==null?void 0:s.trends)==null?void 0:$.aportesGrowth)||0,"% vs período anterior"]})]})})}),e.jsx(t,{bg:x,border:"1px",borderColor:j,children:e.jsx(g,{children:e.jsxs(C,{children:[e.jsx(W,{children:e.jsxs(n,{children:[e.jsx(f,{as:te,color:"orange.500"}),e.jsx(i,{children:"Pedidos"})]})}),e.jsx(P,{children:b((l==null?void 0:l.totalPedidos)||0)}),e.jsxs(R,{children:[e.jsx(E,{type:"increase"}),((V=s==null?void 0:s.trends)==null?void 0:V.pedidosGrowth)||0,"% vs período anterior"]})]})})})]}),e.jsx(t,{bg:x,border:"1px",borderColor:j,children:e.jsx(g,{children:e.jsxs(Fe,{index:be,onChange:ae,children:[e.jsxs(Ge,{children:[e.jsx(F,{children:e.jsxs(n,{children:[e.jsx(f,{as:Ce}),e.jsx(i,{children:"Resumen"})]})}),e.jsx(F,{children:e.jsxs(n,{children:[e.jsx(f,{as:je}),e.jsx(i,{children:"Usuarios"})]})}),e.jsx(F,{children:e.jsxs(n,{children:[e.jsx(f,{as:me}),e.jsx(i,{children:"Contenido"})]})}),e.jsx(F,{children:e.jsxs(n,{children:[e.jsx(f,{as:We}),e.jsx(i,{children:"Rendimiento"})]})})]}),e.jsxs(Me,{children:[e.jsx(G,{children:e.jsxs(p,{spacing:6,align:"stretch",children:[e.jsx(m,{size:"md",children:"Resumen General"}),e.jsxs(w,{columns:{base:1,lg:2},spacing:6,children:[e.jsxs(t,{bg:x,border:"1px",borderColor:j,children:[e.jsx(u,{children:e.jsx(m,{size:"sm",children:"Engagement"})}),e.jsx(g,{children:e.jsxs(p,{spacing:4,align:"stretch",children:[e.jsxs(n,{justify:"space-between",children:[e.jsx(i,{fontSize:"sm",children:"Usuarios Activos Diarios"}),e.jsx(i,{fontWeight:"semibold",children:b(((q=s==null?void 0:s.engagement)==null?void 0:q.dailyActiveUsers)||0)})]}),e.jsx(c,{value:(((N=s==null?void 0:s.engagement)==null?void 0:N.dailyActiveUsers)||0)/((r==null?void 0:r.totalUsuarios)||1)*100,colorScheme:"blue"}),e.jsxs(n,{justify:"space-between",children:[e.jsx(i,{fontSize:"sm",children:"Usuarios Activos Semanales"}),e.jsx(i,{fontWeight:"semibold",children:b(((y=s==null?void 0:s.engagement)==null?void 0:y.weeklyActiveUsers)||0)})]}),e.jsx(c,{value:(((K=s==null?void 0:s.engagement)==null?void 0:K.weeklyActiveUsers)||0)/((r==null?void 0:r.totalUsuarios)||1)*100,colorScheme:"green"}),e.jsxs(n,{justify:"space-between",children:[e.jsx(i,{fontSize:"sm",children:"Usuarios Activos Mensuales"}),e.jsx(i,{fontWeight:"semibold",children:b(((O=s==null?void 0:s.engagement)==null?void 0:O.monthlyActiveUsers)||0)})]}),e.jsx(c,{value:(((Q=s==null?void 0:s.engagement)==null?void 0:Q.monthlyActiveUsers)||0)/((r==null?void 0:r.totalUsuarios)||1)*100,colorScheme:"purple"})]})})]}),e.jsxs(t,{bg:x,border:"1px",borderColor:j,children:[e.jsx(u,{children:e.jsx(m,{size:"sm",children:"Tendencias"})}),e.jsx(g,{children:e.jsx(p,{spacing:4,align:"stretch",children:(s==null?void 0:s.trends)&&Object.entries(s.trends).map(([d,v])=>e.jsxs(n,{justify:"space-between",children:[e.jsx(i,{fontSize:"sm",textTransform:"capitalize",children:d.replace("Growth","")}),e.jsxs(n,{children:[e.jsx(f,{as:fe(v),color:`${H(v)}.500`}),e.jsxs(i,{fontWeight:"semibold",color:`${H(v)}.500`,children:[v>0?"+":"",v,"%"]})]})]},d))})})]})]}),e.jsxs(t,{bg:x,border:"1px",borderColor:j,children:[e.jsx(u,{children:e.jsx(m,{size:"sm",children:"Contenido Más Popular"})}),e.jsx(g,{children:e.jsxs(Be,{variant:"simple",size:"sm",children:[e.jsx(ke,{children:e.jsxs(ge,{children:[e.jsx(T,{children:"Título"}),e.jsx(T,{children:"Tipo"}),e.jsx(T,{children:"Vistas"}),e.jsx(T,{children:"Me gusta"}),e.jsx(T,{children:"Compartidos"})]})}),e.jsx(He,{children:(J=s==null?void 0:s.topContent)==null?void 0:J.slice(0,5).map(d=>e.jsxs(ge,{children:[e.jsx(U,{children:e.jsx(i,{fontWeight:"medium",children:d.title})}),e.jsx(U,{children:e.jsx(a,{colorScheme:"blue",variant:"subtle",children:d.type})}),e.jsx(U,{children:b(d.views)}),e.jsx(U,{children:b(d.likes)}),e.jsx(U,{children:b(d.shares)})]},d.id))})]})})]})]})}),e.jsx(G,{children:e.jsxs(p,{spacing:6,align:"stretch",children:[e.jsx(m,{size:"md",children:"Análisis de Usuarios"}),e.jsxs(w,{columns:{base:1,lg:2},spacing:6,children:[e.jsxs(t,{bg:x,border:"1px",borderColor:j,children:[e.jsx(u,{children:e.jsx(m,{size:"sm",children:"Distribución por Rol"})}),e.jsx(g,{children:e.jsxs(p,{spacing:4,align:"stretch",children:[e.jsxs(n,{justify:"space-between",children:[e.jsxs(n,{children:[e.jsx(a,{colorScheme:"red",children:"Admin"}),e.jsx(i,{fontSize:"sm",children:"Administradores"})]}),e.jsx(i,{fontWeight:"semibold",children:(r==null?void 0:r.totalAdmins)||0})]}),e.jsx(c,{value:((r==null?void 0:r.totalAdmins)||0)/((r==null?void 0:r.totalUsuarios)||1)*100,colorScheme:"red"}),e.jsxs(n,{justify:"space-between",children:[e.jsxs(n,{children:[e.jsx(a,{colorScheme:"blue",children:"Creador"}),e.jsx(i,{fontSize:"sm",children:"Creadores"})]}),e.jsx(i,{fontWeight:"semibold",children:(r==null?void 0:r.totalCreadores)||0})]}),e.jsx(c,{value:((r==null?void 0:r.totalCreadores)||0)/((r==null?void 0:r.totalUsuarios)||1)*100,colorScheme:"blue"}),e.jsxs(n,{justify:"space-between",children:[e.jsxs(n,{children:[e.jsx(a,{colorScheme:"green",children:"Moderador"}),e.jsx(i,{fontSize:"sm",children:"Moderadores"})]}),e.jsx(i,{fontWeight:"semibold",children:(r==null?void 0:r.totalModeradores)||0})]}),e.jsx(c,{value:((r==null?void 0:r.totalModeradores)||0)/((r==null?void 0:r.totalUsuarios)||1)*100,colorScheme:"green"}),e.jsxs(n,{justify:"space-between",children:[e.jsxs(n,{children:[e.jsx(a,{colorScheme:"gray",children:"Usuario"}),e.jsx(i,{fontSize:"sm",children:"Usuarios"})]}),e.jsx(i,{fontWeight:"semibold",children:((r==null?void 0:r.totalUsuarios)||0)-((r==null?void 0:r.totalAdmins)||0)-((r==null?void 0:r.totalCreadores)||0)-((r==null?void 0:r.totalModeradores)||0)})]}),e.jsx(c,{value:(((r==null?void 0:r.totalUsuarios)||0)-((r==null?void 0:r.totalAdmins)||0)-((r==null?void 0:r.totalCreadores)||0)-((r==null?void 0:r.totalModeradores)||0))/((r==null?void 0:r.totalUsuarios)||1)*100,colorScheme:"gray"})]})})]}),e.jsxs(t,{bg:x,border:"1px",borderColor:j,children:[e.jsx(u,{children:e.jsx(m,{size:"sm",children:"Actividad de Usuarios"})}),e.jsx(g,{children:e.jsxs(p,{spacing:4,align:"stretch",children:[e.jsxs(n,{justify:"space-between",children:[e.jsx(i,{fontSize:"sm",children:"Tiempo Promedio de Sesión"}),e.jsx(i,{fontWeight:"semibold",children:((X=s==null?void 0:s.engagement)==null?void 0:X.averageSessionTime)||"0m"})]}),e.jsxs(n,{justify:"space-between",children:[e.jsx(i,{fontSize:"sm",children:"Tasa de Rebote"}),e.jsx(i,{fontWeight:"semibold",children:B(((Y=s==null?void 0:s.engagement)==null?void 0:Y.bounceRate)||0)})]}),e.jsxs(n,{justify:"space-between",children:[e.jsx(i,{fontSize:"sm",children:"Usuarios Activos"}),e.jsx(i,{fontWeight:"semibold",children:b(((Z=s==null?void 0:s.overview)==null?void 0:Z.activeUsers)||0)})]})]})})]})]})]})}),e.jsx(G,{children:e.jsxs(p,{spacing:6,align:"stretch",children:[e.jsx(m,{size:"md",children:"Análisis de Contenido"}),e.jsxs(w,{columns:{base:1,lg:2},spacing:6,children:[e.jsxs(t,{bg:x,border:"1px",borderColor:j,children:[e.jsx(u,{children:e.jsx(m,{size:"sm",children:"Estados de Aportes"})}),e.jsx(g,{children:e.jsxs(p,{spacing:4,align:"stretch",children:[e.jsxs(n,{justify:"space-between",children:[e.jsxs(n,{children:[e.jsx(a,{colorScheme:"green",children:"Aprobados"}),e.jsx(i,{fontSize:"sm",children:"Aportes aprobados"})]}),e.jsx(i,{fontWeight:"semibold",children:(o==null?void 0:o.aportesAprobados)||0})]}),e.jsx(c,{value:((o==null?void 0:o.aportesAprobados)||0)/((o==null?void 0:o.totalAportes)||1)*100,colorScheme:"green"}),e.jsxs(n,{justify:"space-between",children:[e.jsxs(n,{children:[e.jsx(a,{colorScheme:"yellow",children:"Pendientes"}),e.jsx(i,{fontSize:"sm",children:"En revisión"})]}),e.jsx(i,{fontWeight:"semibold",children:(o==null?void 0:o.aportesPendientes)||0})]}),e.jsx(c,{value:((o==null?void 0:o.aportesPendientes)||0)/((o==null?void 0:o.totalAportes)||1)*100,colorScheme:"yellow"}),e.jsxs(n,{justify:"space-between",children:[e.jsxs(n,{children:[e.jsx(a,{colorScheme:"red",children:"Rechazados"}),e.jsx(i,{fontSize:"sm",children:"Aportes rechazados"})]}),e.jsx(i,{fontWeight:"semibold",children:(o==null?void 0:o.aportesRechazados)||0})]}),e.jsx(c,{value:((o==null?void 0:o.aportesRechazados)||0)/((o==null?void 0:o.totalAportes)||1)*100,colorScheme:"red"})]})})]}),e.jsxs(t,{bg:x,border:"1px",borderColor:j,children:[e.jsx(u,{children:e.jsx(m,{size:"sm",children:"Estados de Pedidos"})}),e.jsx(g,{children:e.jsxs(p,{spacing:4,align:"stretch",children:[e.jsxs(n,{justify:"space-between",children:[e.jsxs(n,{children:[e.jsx(a,{colorScheme:"green",children:"Completados"}),e.jsx(i,{fontSize:"sm",children:"Pedidos finalizados"})]}),e.jsx(i,{fontWeight:"semibold",children:(l==null?void 0:l.pedidosCompletados)||0})]}),e.jsx(c,{value:((l==null?void 0:l.pedidosCompletados)||0)/((l==null?void 0:l.totalPedidos)||1)*100,colorScheme:"green"}),e.jsxs(n,{justify:"space-between",children:[e.jsxs(n,{children:[e.jsx(a,{colorScheme:"yellow",children:"Pendientes"}),e.jsx(i,{fontSize:"sm",children:"En espera"})]}),e.jsx(i,{fontWeight:"semibold",children:(l==null?void 0:l.pedidosPendientes)||0})]}),e.jsx(c,{value:((l==null?void 0:l.pedidosPendientes)||0)/((l==null?void 0:l.totalPedidos)||1)*100,colorScheme:"yellow"}),e.jsxs(n,{justify:"space-between",children:[e.jsxs(n,{children:[e.jsx(a,{colorScheme:"blue",children:"En Proceso"}),e.jsx(i,{fontSize:"sm",children:"En desarrollo"})]}),e.jsx(i,{fontWeight:"semibold",children:(l==null?void 0:l.pedidosEnProceso)||0})]}),e.jsx(c,{value:((l==null?void 0:l.pedidosEnProceso)||0)/((l==null?void 0:l.totalPedidos)||1)*100,colorScheme:"blue"})]})})]})]})]})}),e.jsx(G,{children:e.jsxs(p,{spacing:6,align:"stretch",children:[e.jsx(m,{size:"md",children:"Análisis de Rendimiento"}),e.jsxs(w,{columns:{base:1,lg:2},spacing:6,children:[e.jsxs(t,{bg:x,border:"1px",borderColor:j,children:[e.jsx(u,{children:e.jsx(m,{size:"sm",children:"Métricas del Sistema"})}),e.jsx(g,{children:e.jsxs(p,{spacing:4,align:"stretch",children:[e.jsxs(n,{justify:"space-between",children:[e.jsx(i,{fontSize:"sm",children:"Tiempo de Respuesta"}),e.jsxs(i,{fontWeight:"semibold",children:[((_=s==null?void 0:s.performance)==null?void 0:_.responseTime)||0,"ms"]})]}),e.jsx(c,{value:Math.min((((S=s==null?void 0:s.performance)==null?void 0:S.responseTime)||0)/1e3*100,100),colorScheme:((D=s==null?void 0:s.performance)==null?void 0:D.responseTime)<500?"green":"orange"}),e.jsxs(n,{justify:"space-between",children:[e.jsx(i,{fontSize:"sm",children:"Uptime"}),e.jsx(i,{fontWeight:"semibold",children:B(((ee=s==null?void 0:s.performance)==null?void 0:ee.uptime)||0)})]}),e.jsx(c,{value:((se=s==null?void 0:s.performance)==null?void 0:se.uptime)||0,colorScheme:"green"}),e.jsxs(n,{justify:"space-between",children:[e.jsx(i,{fontSize:"sm",children:"Tasa de Error"}),e.jsx(i,{fontWeight:"semibold",children:B(((re=s==null?void 0:s.performance)==null?void 0:re.errorRate)||0)})]}),e.jsx(c,{value:((ie=s==null?void 0:s.performance)==null?void 0:ie.errorRate)||0,colorScheme:((ne=s==null?void 0:s.performance)==null?void 0:ne.errorRate)<5?"green":"red"})]})})]}),e.jsxs(t,{bg:x,border:"1px",borderColor:j,children:[e.jsx(u,{children:e.jsx(m,{size:"sm",children:"Throughput"})}),e.jsx(g,{children:e.jsxs(p,{spacing:4,align:"stretch",children:[e.jsxs(n,{justify:"space-between",children:[e.jsx(i,{fontSize:"sm",children:"Requests/min"}),e.jsx(i,{fontWeight:"semibold",children:b(((oe=s==null?void 0:s.performance)==null?void 0:oe.throughput)||0)})]}),e.jsx(c,{value:Math.min((((le=s==null?void 0:s.performance)==null?void 0:le.throughput)||0)/1e3*100,100),colorScheme:"blue"}),e.jsxs(n,{justify:"space-between",children:[e.jsx(i,{fontSize:"sm",children:"Bot Uptime"}),e.jsx(i,{fontWeight:"semibold",children:((de=s==null?void 0:s.overview)==null?void 0:de.botUptime)||"0h 0m"})]}),e.jsxs(n,{justify:"space-between",children:[e.jsx(i,{fontSize:"sm",children:"Grupos Autorizados"}),e.jsxs(i,{fontWeight:"semibold",children:[(h==null?void 0:h.gruposAutorizados)||0," / ",(h==null?void 0:h.totalGrupos)||0]})]}),e.jsx(c,{value:((h==null?void 0:h.gruposAutorizados)||0)/((h==null?void 0:h.totalGrupos)||1)*100,colorScheme:"green"})]})})]})]})]})})]})]})})})]})})};export{Ze as Analytics,Ze as default};
//# sourceMappingURL=Analytics-CBtcwlfH.js.map
